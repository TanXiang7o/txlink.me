---
title: 微服务面试题整理
date: '2024-08-28'
tags: ["微服务", "面试题", "软件架构", "DevOps", "服务治理"]
draft: false
summary: '探索微服务架构的核心概念、优势及面试常见问题'
authors: ['default']
---

# 微服务面试题整理

---

## 分布式和微服务的区别是什么？

分布式系统是将传统的集中式系统拆分成多个独立的小系统，每个系统单独对外提供一部分功能。

而微服务是分布式系统的一种。其它还有C/S架构、Serverless架构、p2p架构等。

## 什么是微服务架构？优势？特点？

软件结构风格、拆分单元、独立部署运行扩展、轻量级的通信机制、高内聚低耦合、互不影响、不同技术栈、

微服务架构是一种软件结构风格，主要用于构建复杂的应用程序，它将一个大型的系统拆分成一组小型、独立的服务单元，每个服务单元都可以独立部署、运行和扩展。每个微服务都专注于一个特定的业务功能，并通过轻量级的通信机制进行通信。

微服务的目的是有效地拆分应用，实现敏捷开发和部署。实现系统高内聚和系统间低耦合。

并且每个拆分出来的服务都可以使用不同的技术栈，这使得团队可以选择最擅长的技术来构建服务。

## SOA和微服务之间的主要区别是什么？

SOA和微服务差不多，主要是通信方面，SOA使用服务总线进行通信，而微服务基于更轻量的通信方式（rpc、http）。

## 什么是康威定律？

> Organizations which design systems are constrained to produce designs which are copies of the communication structures of these 》 organizations.- Melvin Conway(1967)

即设计系统的组织，其产生的设计等同于组织之内、组织之间的沟通结构。

即企业的组织结构决定了业务架构、系统架构。而系统架构的不合理，往往是因为组织架构的不合理导致的。

## 如何进行微服务的拆分？

- 业务功能。根据业务功能进行拆分，某些业务比较独立的，可以解耦出来的，可以单独作为一个服务。比如用户服务、订单服务等。
- 团队组织结构。按照康威定律来说，应用架构和组织架构应该是一一对应的，这样更容易进行微服务的开发与维护，能够做到最小成本沟通和最快速度迭代。
- 技术架构。不同的技术栈、不同的中间件体系，不同的开发语言等。

## 微服务架构的服务治理有哪些方案？

服务治理包括了以下模块：

### 服务注册与发现

微服务可以向注册中心注册服务的信息，如地址、端口等，其它服务可以动态地获取该服务的信息，从而实现服务之间的通信。

常见的实现方案有：

- ZooKeeper
- Concul
- Eureka
- Nacos

### 复杂均衡

负载均衡是指将请求分配到多个服务实例中，以达到分摊负载的目的，常见的实现方案有：

- Ribbon：Ribbon是Netflix开源的一个负载均衡框架，可以与Eureka配合使用。
- Nginx：Nginx是一个高性能的Web服务器，也可以用作反向代理和负载均衡器，可以实现对多个服务实例的复杂均衡。

### 熔断机制

当某个服务不可用时，可以快速断开该服务的调用，防止故障扩散，并提供备用响应或执行其他补救措施。常见的实现方案有：

- Hystrix：Hystrix是Netfix开源的一个容错框架，可以实现服务的熔断、降级和容错等功能。
- Sentinel：Sentinel是阿里开源的一个流量控制和容错框架，可以实现服务的熔断、降级、限流和系统保护等功能。

### 限流机制

限制服务的访问量，通过限制每个微服务的请求频率或并发数，防止服务过载和雪崩效应的发生。常见的实现方案有：

- Rate Limiter：Rate Limiter是Google开源的一个限流框架，可以实现对访问频率的限制。
- lstio：lstio是由Google、IBM和Lyft等公司共同推出的一个服务网格框架，可以实现对服务流量的控制和管理。
- Sentinel：Sentinel也支持限流的功能。

### 降级机制

在资源紧张或者故障情况下，可以通过降级机制优先处理重要或者核心功能，关闭不重要的功能。比如，在后端出现问题时，前端执行默认兜底逻辑。常见的实现方案有：

- Hystrix：Hystrix是Netflix开源的一个容错框架，可以实现服务的熔断、降级和容错等功能。
- Sentinel：Sentinel也支持降级的功能。

### 分布式链路追踪

通过对微服务调用链路进行追踪和监控，可以帮助定位问题、优化性能，并提供可视化的调用链路图。常见的实现方案有：

- skywalking：Skywalking是分布式系统的应用程序性能监视工具，专为微服务，云原生架构和基于容器(Docker，K8S,Mesos)架构而设计，它是一款优秀的APM工具，包括了分布式追踪，性能指标分析和服务依赖分析等。
- zipkin：Zipkin是Twitter 的一个开源项目，基于Google Dapper实现。 可以使用它来收集各个服务器上请求链路的跟踪数据，并通过它提供的RESTAPI接口来辅助我们查询跟踪数据以实现对分布式系统的监控程序从而及时地发现系统中出现的延迟升高问题并找出系统性能瓶颈的根源。

### 服务监控

服务监控是指对服务进行实时监控和追踪，以及对服务性能进行评估和优化。常见的实现方案有：

- Prometheus：Prometheus是由SoundCloud开源的一个监控系统，可以实现对服务的实时监控和度量。

## 什么是DevOps？

现在很多公司和团队都在提DevOps，这其实不是个技术，其实是一种开发流程，或者说一种开发文化。**它强调软件开发和IT运维的紧密结合，以实现更快速、更频繁、更可靠的软件交付。**DevOps的核心目标是提高软件交付的速度和质量，缩短软件上线的周期，同时提高应用程序的可靠性和可维护性。DevOps的出现是为了解决传统软件开发和运维模式中存在的问题，例如开发和运维之间的沟通不畅、软件交付周期过长、人工操作错误率高、应用程序可靠性低等。通过采用DevOps理念和工具，企业可以更快速、更高效地推出新的软件功能，降低软件交付成本，提高客户满意度。和传统的开发方式上比较的区别是:以前的开发模式中，开发和运维团队是完全独立开的，开发负责应用开发，运维团队负责打包和发布。出了问题各自看各自的问题。但是在DevOps的实践中，开发团队和运维团队不再是独立的个体，而是合作伙伴，**共同负责整个软件的全生命周期，甚至有些公司直接不要运维团队了，由开发自己做运维。**之所以可以这么做，是因为有很多**持续集成、持续交付和持续部署**的自动化工具的出现。

## 微服务中的CI/CD？

CI时Continuous Integration，翻译过来是持续集成，CD可以是Continuous Delivery和Continuous Deployment，翻译过来就是持续交付和持续部署。

CI是让开发者快速将变更合并到主干，就像Github Actions一样，在code review前，先把项目在不同平台上构建、测试，如果出现问题，就不进行code review，这大大降低了项目维护人员的工作时间。

持续交付在持续集成的基础上，将集成后的代码部署到更贴近真实运行环境的「类生产环境」(production-like environments)中。比如，我们完成单元测试后，可以把代码部署到连接数据库的Staging环境中更多的测试如果代码没有问题，可以继续手动部署到生产环境中。

持续部署则是在持续交付的基础上，把部署到生产环境的过程自动化。

## 什么是ServiceMesh?

## 灰度发布、蓝绿部署、金丝雀部署都是什么？

## 什么是微服务的循环依赖？

## 限流、降级、熔断有什么区别？

## 各个微服务之间，有哪些调用方式？

HTTP、RPC、消息队列、Service Mesh

1. 如果对性能有要求，需要选择高性能的RPC框架，如gRPC或者Dubbo等。
2. 异步通信，需要消息队列。
3. 跨语言场景，考虑用Service Mesh。

---

